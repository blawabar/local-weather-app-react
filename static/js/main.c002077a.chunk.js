(this["webpackJsonplw-react"]=this["webpackJsonplw-react"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,a){e.exports=a(33)},,,,,function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),o=a.n(c),i=(a(17),a(18),a(2)),s=Object.freeze({"01d":"clear-sky-d","01n":"clear-sky-n","02d":"few-clouds-d","02n":"few-clouds-n","03d":"scattered-clouds-d","03n":"scattered-clouds-n","04d":"broken-clouds-d","04n":"broken-clouds-n","09d":"shower-rain-d","09n":"shower-rain-n","10d":"rain-d","10n":"rain-n","11d":"thunderstorm-d","11n":"thunderstorm-n","13d":"snow-d","13n":"snow-n","50d":"mist"}),u=Object.freeze({METRIC:"METRIC",IMPERIAL:"IMPERIAL"}),l=Object.freeze({GET_WEATHER_DATA_REQUEST:"GET_WEATHER_DATA_REQUEST",GET_WEATHER_DATA_SUCCESS:"GET_WEATHER_DATA_SUCCESS",GET_WEATHER_DATA_ERROR:"GET_WEATHER_DATA_ERROR",GEOLOCATION_ERROR:"GEOLOCATION_ERROR",SWITCH_UNITS_TYPE:"SWITCH_UNITS_TYPE"}),E=function(e){return e?parseFloat(e.toFixed(2)):0},d=a(3),m=a.n(d),f=a(6),p=a(1),h=l.GET_WEATHER_DATA_REQUEST,_=l.GET_WEATHER_DATA_ERROR,T=l.GET_WEATHER_DATA_SUCCESS,v=function(e){return parseFloat(e.toFixed(1))},R=function(e){if(!e||"object"!==typeof e)throw new Error("Improper type of weather data!");var t=e.coord,a=Object(i.a)(e.weather,1)[0],n=a.description,r=a.icon,c=e.main,o=c.temp,s=c.pressure,u=c.humidity,l=e.wind.speed,E=e.sys.country,d=e.name;return{coord:t,location:"".concat(d,", ").concat(E),temp:v(o),description:{text:n,icon:r},details:{windSpeed:v(l),pressure:s,humidity:u}}},w=function(e,t){var a=t.weatherData,n=a.details.windSpeed,r=a.temp,c=v(e===u.METRIC?5*(r-32)/9:1.8*r+32),o=v(e===u.METRIC?.447*n:2.237*n);return Object(p.a)({},a,{temp:c,details:Object(p.a)({},a.details,{windSpeed:o})})},O=function(){var e=Object(f.a)(m.a.mark((function e(t,a){var n,r,c,o,i,s,u,l;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.lat,r=t.lon,c="".concat("https://api.openweathermap.org/data/2.5/weather","?lat=").concat(n,"&lon=").concat(r,"&units=metric&APPID=").concat("086370e96396a4464fe97ec16a0f7381"),e.prev=2,a({type:h}),e.next=6,fetch(c);case 6:if(!(o=e.sent).ok){e.next=14;break}return e.next=10,o.json();case 10:i=e.sent,a({type:T,payload:R(i)}),e.next=20;break;case 14:return e.next=16,o.json();case 16:s=e.sent,u=s.cod,l=s.message,a({type:_,payload:"Fetch error - code: ".concat(u,", message: ").concat(l)});case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(2),a({type:_,payload:e.t0});case 25:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t,a){return e.apply(this,arguments)}}(),b=function(e,t){return function(){var a,n,r=e.weatherData;r?O(r.coord,t):(a=function(e){O(function(e){var t={lat:0,lon:0};if(e){var a=e.coords,n=a.latitude,r=a.longitude;t={lat:E(n),lon:E(r)}}return t}(e),t)},n=function(e){return function(e,t){var a="An unknown Geolocation related error occurred.";switch(e.code){case e.PERMISSION_DENIED:a="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:a="Location information is unavailable.";break;case e.TIMEOUT:a="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:}t({type:l.GEOLOCATION_ERROR,payload:a})}(e,t)},navigator.geolocation?navigator.geolocation.getCurrentPosition(a,n):alert("Geolocation is not supported by this browser."))}},A=function(e,t){return function(){t({type:l.SWITCH_UNITS_TYPE,payload:e.unitsType===u.METRIC?u.IMPERIAL:u.METRIC})}},y={isLoading:!1,error:null,success:!1,weatherData:null,unitsType:u.METRIC},I=l.GET_WEATHER_DATA_REQUEST,N=l.GET_WEATHER_DATA_SUCCESS,g=l.GET_WEATHER_DATA_ERROR,k=l.GEOLOCATION_ERROR,C=l.SWITCH_UNITS_TYPE,S=function(e,t){var a=t.type,n=t.payload;switch(a){case I:return Object(p.a)({},e,{isLoading:!0});case N:return Object(p.a)({},e,{isLoading:!1,error:null,success:!0,weatherData:n});case C:return Object(p.a)({},e,{weatherData:w(n,e),unitsType:n});case g:case k:return Object(p.a)({},e,{isLoading:!1,error:n,success:!1,weatherData:null});default:throw new Error("Unknown Service State: ".concat(a))}},j=Object(n.createContext)({}),D=j.Provider,x=function(e){var t=e.children,a=Object(n.useReducer)(S,y),c=Object(i.a)(a,2),o=c[0],s=c[1];return r.a.createElement(D,{value:{state:o,actions:{getWeatherData:b(o,s),switchUnitsType:A(o,s)}}},t)},W=(a(20),function(){var e=Object(n.useRef)((new Date).toLocaleDateString()),t=Object(n.useCallback)((function(){return(new Date).toLocaleTimeString()}),[]),a=Object(n.useState)((function(){return t()})),c=Object(i.a)(a,2),o=c[0],s=c[1];return Object(n.useEffect)((function(){var e=setInterval((function(){s(t())}),1e3);return function(){return clearInterval(e)}}),[]),r.a.createElement("div",{className:"calendar"},r.a.createElement("span",{className:"calendar__time"},o),r.a.createElement("span",{className:"calendar__date"}," - ",e.current))}),L=(a(21),function(e){var t=e.descData,a=t.icon,n=t.text;return r.a.createElement("section",{className:"description"},r.a.createElement("p",{className:"description__icon description__icon--".concat(s[a])}),r.a.createElement("p",{className:"description__text"},n))}),U=(a(22),function(e){var t=e.detailsData,a=t.windSpeed,n=t.pressure,c=t.humidity,o=[{category:"wind",title:"Wind speed",value:a,units:e.unitsType===u.METRIC?"m/s":"mph"},{category:"pressure",title:"Air pressure",value:n,units:"hPa"},{category:"humidity",title:"Humidity",value:c,units:"%"}].map((function(e,t){var a=e.category,n=e.title,c=e.value,o=e.units;return r.a.createElement("div",{key:t,className:"details__".concat(a)},r.a.createElement("p",{className:"details__title"},n),r.a.createElement("p",{className:"details__value"},"".concat(c," ").concat(o)))}));return r.a.createElement("section",{className:"details"},o)}),G=(a(23),function(e){var t=e.error;return r.a.createElement("div",{className:"error-screen"},r.a.createElement("h1",{className:"error-screen__title"},"An error has occured."),r.a.createElement("p",{className:"error-screen__details"},t))}),H=(a(24),function(){var e=Object(n.useRef)([{text:"Weather API:",linkRef:"http://openweathermap.org",linkText:"Open Weather Map"},{text:"Weather Font:",linkRef:"https://www.behance.net/artill",linkText:"Lukas Bischoff"},{text:"Weather images:",linkRef:"https://www.flickr.com/photos/archikvadrat/",linkText:"Anatol C."}]);return r.a.createElement("footer",{className:"footer"},r.a.createElement("section",{className:"footer__copyright"},"Local Weather Application (Bart Krolak, 2020)"),e.current.map((function(e,t){var a=e.text,n=e.linkRef,c=e.linkText;return r.a.createElement("section",{key:t,className:"footer__credits"},r.a.createElement("span",{className:"footer__text"},a),r.a.createElement("a",{className:"footer__link",href:n,target:"_blank",rel:"noopener noreferrer"},c))})))}),M=(a(25),function(e){var t=e.message,a=void 0===t?"Loading Local Weather Data...":t;return r.a.createElement("div",{className:"loading-screen"},r.a.createElement("h1",{className:"loading-screen__title"},a))}),P=(a(26),function(e){var t=e.locationData;return r.a.createElement("section",{className:"location"},r.a.createElement("div",{className:"location__city"},t),r.a.createElement(W,null))}),B=(a(27),function(e){var t=e.tempValue,a=e.unitsType,n="temperature--is-".concat(a===u.METRIC?"celsius":"fahrenheit");return r.a.createElement("h3",{className:"temperature ".concat(n)},t)}),F=(a(28),function(e){var t=e.onUnitsChange,a=e.unitsType,c=Object(n.useRef)("units-switch__cover"),o=Object(n.useRef)("units-switch__unit-info"),i="".concat(c.current," ").concat(c.current,"--is-").concat(a.toLowerCase()),s=[u.METRIC,u.IMPERIAL].map((function(e,t){return r.a.createElement("p",{key:t,className:(n=e,a===n?"".concat(o.current," ").concat(o.current,"--is-active"):o.current)},e.toLowerCase());var n}));return r.a.createElement("div",{className:"units-switch",onClick:t},r.a.createElement("div",{className:i}),s)}),z=(a(29),function(e){var t=e.children,a=Object(n.useContext)(j).state.weatherData.description.icon,c=s[a],o=c?"weather-background weather-background--".concat(c):"weather-background";return r.a.createElement("div",{className:o},r.a.createElement("div",{className:"weather-background__glass-pane"},t))}),Q=(a(30),function(){var e=Object(n.useContext)(j),t=e.state,a=t.isLoading,c=t.error,o=t.success,i=e.actions.getWeatherData;Object(n.useEffect)((function(){i()}),[]),function(e,t){var a=Object(n.useCallback)((function(e){if("number"===typeof e&&e>0)return 60*e*1e3;throw new Error("HeartBeat value must be a number greater than zero!")}),[]),r=Object(n.useMemo)((function(){return a(e)}),[e,a]);Object(n.useEffect)((function(){if(!t||"function"!==typeof t)throw new Error("Action type provided for the HeartBeat must be a function!");var e=setInterval((function(){t()}),r);return function(){clearInterval(e)}}),[r,t])}(15,i);var s=r.a.createElement(M,{message:"Getting user coordinates..."});return a?s=r.a.createElement(M,null):c?s=r.a.createElement(G,{error:c.toString()}):o&&(s=r.a.createElement(V,null)),r.a.createElement("div",{className:"weather-engine"},s)}),Y=(a(31),function(){var e=Object(n.useContext)(j),t=e.state,a=t.weatherData,c=t.unitsType,o=e.actions.switchUnitsType,i=a.description,s=a.details,u=a.location,l=a.temp;return r.a.createElement("div",{className:"weather-info"},r.a.createElement(F,{onUnitsChange:o,unitsType:c}),r.a.createElement(P,{locationData:u}),r.a.createElement(B,{tempValue:l,unitsType:c}),r.a.createElement(L,{descData:i}),r.a.createElement(U,{detailsData:s,unitsType:c}))}),V=(a(32),function(){return r.a.createElement("div",{className:"weather-screen"},r.a.createElement(z,null,r.a.createElement(Y,null)))}),q=a(7),J=a(8),K=a(10),X=a(9),Z=a(11),$=function(e){function t(e){var a;return Object(q.a)(this,t),(a=Object(K.a)(this,Object(X.a)(t).call(this,e))).state={error:null,errorInfo:null},a}return Object(Z.a)(t,e),Object(J.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){var e=this.state,t=e.error,a=e.errorInfo;return t?r.a.createElement(G,{error:"".concat(t.toString()," - ").concat(a.componentStack)}):this.props.children}}]),t}(r.a.Component);var ee=function(){return r.a.createElement("div",{className:"App"},r.a.createElement($,null,r.a.createElement(x,null,r.a.createElement(Q,null))),r.a.createElement(H,null))};o.a.render(r.a.createElement(ee,null),document.getElementById("root"))}],[[12,1,2]]]);
//# sourceMappingURL=main.c002077a.chunk.js.map