(this["webpackJsonplw-react"]=this["webpackJsonplw-react"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){e.exports=n(33)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(5),o=n.n(c),i=(n(17),n(18),n(2)),s=(n(19),function(){var e=Object(a.useRef)((new Date).toLocaleDateString()),t=Object(a.useCallback)((function(){return(new Date).toLocaleTimeString()}),[]),n=Object(a.useState)((function(){return t()})),c=Object(i.a)(n,2),o=c[0],s=c[1];return Object(a.useEffect)((function(){var e=setInterval((function(){s(t())}),1e3);return function(){return clearInterval(e)}}),[]),r.a.createElement("div",{className:"calendar"},r.a.createElement("span",{className:"calendar__time"},o),r.a.createElement("span",{className:"calendar__date"}," - ",e.current))}),u=(n(20),Object.freeze({"01d":"clear-sky-d","01n":"clear-sky-n","02d":"few-clouds-d","02n":"few-clouds-n","03d":"scattered-clouds-d","03n":"scattered-clouds-n","04d":"broken-clouds-d","04n":"broken-clouds-n","09d":"shower-rain-d","09n":"shower-rain-n","10d":"rain-d","10n":"rain-n","11d":"thunderstorm-d","11n":"thunderstorm-n","13d":"snow-d","13n":"snow-n","50d":"mist"})),l=Object.freeze({METRIC:"METRIC",IMPERIAL:"IMPERIAL"}),d=Object.freeze({FETCH_INIT:"FETCH_INIT",FETCH_SUCCESS:"FETCH_SUCCESS",FETCH_ERROR:"FETCH_ERROR",GEOLOCATION_ERROR:"GEOLOCATION_ERROR",SWITCH_UNITS_TYPE:"SWITCH_UNITS_TYPE"}),m=function(e){var t=e.descData,n=t.icon,a=t.text;return r.a.createElement("section",{className:"description"},r.a.createElement("p",{className:"description__icon description__icon--".concat(u[n])}),r.a.createElement("p",{className:"description__text"},a))},f=(n(21),function(e){var t=e.detailsData,n=t.windSpeed,a=t.pressure,c=t.humidity,o=[{category:"wind",title:"Wind speed",value:n,units:e.unitsType===l.METRIC?"m/s":"mph"},{category:"pressure",title:"Air pressure",value:a,units:"hPa"},{category:"humidity",title:"Humidity",value:c,units:"%"}].map((function(e,t){var n=e.category,a=e.title,c=e.value,o=e.units;return r.a.createElement("div",{key:t,className:"details__".concat(n)},r.a.createElement("p",{className:"details__title"},a),r.a.createElement("p",{className:"details__value"},"".concat(c," ").concat(o)))}));return r.a.createElement("section",{className:"details"},o)}),p=(n(22),function(e){var t=e.error;return r.a.createElement("div",{className:"error-screen"},r.a.createElement("h1",{className:"error-screen__title"},"An error has occured."),r.a.createElement("p",{className:"error-screen__details"},t))}),E=(n(23),function(){var e=Object(a.useRef)([{text:"Weather API:",linkRef:"http://openweathermap.org",linkText:"Open Weather Map"},{text:"Weather Font:",linkRef:"https://www.behance.net/artill",linkText:"Lukas Bischoff"},{text:"Weather images:",linkRef:"https://www.flickr.com/photos/archikvadrat/",linkText:"Anatol C."}]);return r.a.createElement("footer",{className:"footer"},r.a.createElement("section",{className:"footer__copyright"},"Local Weather Application (Bart Krolak, 2020)"),e.current.map((function(e,t){var n=e.text,a=e.linkRef,c=e.linkText;return r.a.createElement("section",{key:t,className:"footer__credits"},r.a.createElement("span",{className:"footer__text"},n),r.a.createElement("a",{className:"footer__link",href:a,target:"_blank",rel:"noopener noreferrer"},c))})))}),h=(n(24),function(e){var t=e.message,n=void 0===t?"Loading Local Weather Data...":t;return r.a.createElement("div",{className:"loading-screen"},r.a.createElement("h1",{className:"loading-screen__title"},n))}),v=(n(25),function(e){var t=e.locationData;return r.a.createElement("section",{className:"location"},r.a.createElement("div",{className:"location__city"},t),r.a.createElement(s,null))}),w=(n(26),function(e){var t=e.tempValue,n=e.unitsType,a="temperature--is-".concat(n===l.METRIC?"celsius":"fahrenheit");return r.a.createElement("h3",{className:"temperature ".concat(a)},t)}),T=(n(27),function(e){var t=e.onUnitsChange,n=e.unitsType,c=Object(a.useRef)("units-switch__cover"),o=Object(a.useRef)("units-switch__unit-info"),i="".concat(c.current," ").concat(c.current,"--is-").concat(n.toLowerCase()),s=[l.METRIC,l.IMPERIAL].map((function(e,t){return r.a.createElement("p",{key:t,className:(a=e,n===a?"".concat(o.current," ").concat(o.current,"--is-active"):o.current)},e.toLowerCase());var a}));return r.a.createElement("div",{className:"units-switch",onClick:t},r.a.createElement("div",{className:i}),s)}),O=(n(28),Object(a.createContext)(null)),_=function(e){var t=e.children,n=Object(a.useContext)(O).weatherData.description.icon,c=u[n],o=c?"weather-background weather-background--".concat(c):"weather-background";return r.a.createElement("div",{className:o},r.a.createElement("div",{className:"weather-background__glass-pane"},t))},b=(n(29),n(1)),I=n(3),R=n.n(I),y=n(6),C=function(e){return e?parseFloat(e.toFixed(2)):0},N=function(e){return parseFloat(e.toFixed(1))},k=function(e){if(!e||"object"!==typeof e)throw new Error("Improper type of weather data!");var t=e.coord,n=Object(i.a)(e.weather,1)[0],a=n.description,r=n.icon,c=e.main,o=c.temp,s=c.pressure,u=c.humidity,l=e.wind.speed,d=e.sys.country,m=e.name;return{coord:t,location:"".concat(m,", ").concat(d),temp:N(o),description:{text:a,icon:r},details:{windSpeed:N(l),pressure:s,humidity:u}}},g=function(e,t){var n=t.weatherData,a=n.details.windSpeed,r=n.temp,c=N(e===l.METRIC?5*(r-32)/9:1.8*r+32),o=N(e===l.METRIC?.447*a:2.237*a);return Object(b.a)({},n,{temp:c,details:Object(b.a)({},n.details,{windSpeed:o})})},j=function(e){return function(t){return function(){return t({type:d.SWITCH_UNITS_TYPE,payload:e.unitsType===l.METRIC?l.IMPERIAL:l.METRIC})}}},S={isLoading:!1,weatherData:null,error:null,unitsType:l.METRIC},x=d.FETCH_INIT,L=d.FETCH_SUCCESS,D=d.FETCH_ERROR,A=d.GEOLOCATION_ERROR,M=d.SWITCH_UNITS_TYPE,U=function(e,t){var n=t.type,a=t.payload;switch(n){case x:return Object(b.a)({},e,{isLoading:!0});case L:return Object(b.a)({},e,{isLoading:!1,weatherData:a,error:null});case M:return Object(b.a)({},e,{unitsType:a,weatherData:g(a,e)});case D:case A:return Object(b.a)({},e,{isLoading:!1,weatherData:null,error:a});default:throw new Error("Unknown Service State: ".concat(n))}},F=function(e){var t=Object(a.useRef)("https://api.openweathermap.org/data/2.5/weather"),n=Object(a.useRef)("086370e96396a4464fe97ec16a0f7381"),r=Object(a.useReducer)(U,S),c=Object(i.a)(r,2),o=c[0],s=c[1];return Object(a.useEffect)((function(){var e,a,r=new AbortController,c=r.signal,o=function(){var e=Object(y.a)(R.a.mark((function e(a){var r,o,i,u,l,m;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.lat,o=a.lon,i="".concat(t.current,"?lat=").concat(r,"&lon=").concat(o,"&units=metric&APPID=").concat(n.current),e.prev=2,s({type:d.FETCH_INIT}),e.next=6,fetch(i,{signal:c});case 6:if(!(u=e.sent).ok){e.next=14;break}return e.next=10,u.json();case 10:l=e.sent,s({type:d.FETCH_SUCCESS,payload:k(l)}),e.next=18;break;case 14:return e.next=16,u.json();case 16:m=e.sent,s({type:d.FETCH_ERROR,payload:m});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),s({type:d.FETCH_ERROR,payload:e.t0});case 23:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t){return e.apply(this,arguments)}}();return e=function(e){o(Object(b.a)({},function(e){var t={lat:0,lon:0};if(e){var n=e.coords,a=n.latitude,r=n.longitude;t={lat:C(a),lon:C(r)}}return t}(e)))},a=function(e){return function(e,t){var n="An unknown Geolocation related error occurred.";switch(e.code){case e.PERMISSION_DENIED:n="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:n="Location information is unavailable.";break;case e.TIMEOUT:n="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:}t({type:d.GEOLOCATION_ERROR,payload:n})}(e,s)},navigator.geolocation?navigator.geolocation.getCurrentPosition(e,a):alert("Geolocation is not supported by this browser."),function(){return r.abort()}}),e),{state:o,switchUnitsType:j(o)(s)}},H=function(){var e=function(e){var t=Object(a.useCallback)((function(e){if("number"===typeof e&&e>0)return 60*e*1e3;throw new Error("nbrOfMinutes must be a number greater than zero!")}),[]),n=Object(a.useMemo)((function(){return t(e)}),[e,t]),r=Object(a.useState)(!1),c=Object(i.a)(r,2),o=c[0],s=c[1];return Object(a.useEffect)((function(){var e=setInterval((function(){s(!o)}),n);return function(){clearInterval(e)}}),[n,o]),o}(15),t=F([e]),n=t.state,c=t.switchUnitsType,o=n.isLoading,s=n.error,u=n.weatherData,l=n.unitsType,d=r.a.createElement(h,{message:"Getting user coordinates..."});return o?d=r.a.createElement(h,null):s?d=r.a.createElement(p,{error:s.toString()}):u&&(d=r.a.createElement(O.Provider,{value:{weatherData:u,unitsType:l,switchUnitsType:c}},r.a.createElement(W,null))),r.a.createElement("div",{className:"weather-engine"},d)},P=(n(31),function(){var e=Object(a.useContext)(O),t=e.weatherData,n=e.switchUnitsType,c=e.unitsType,o=t.description,i=t.details,s=t.location,u=t.temp;return r.a.createElement("div",{className:"weather-info"},r.a.createElement(T,{onUnitsChange:n,unitsType:c}),r.a.createElement(v,{locationData:s}),r.a.createElement(w,{tempValue:u,unitsType:c}),r.a.createElement(m,{descData:o}),r.a.createElement(f,{detailsData:i,unitsType:c}))}),W=(n(32),function(){return r.a.createElement("div",{className:"weather-screen"},r.a.createElement(_,null,r.a.createElement(P,null)))}),G=n(7),z=n(8),B=n(10),Y=n(9),V=n(11),q=function(e){function t(e){var n;return Object(G.a)(this,t),(n=Object(B.a)(this,Object(Y.a)(t).call(this,e))).state={hasError:!1,error:null,errorInfo:null},n}return Object(V.a)(t,e),Object(z.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.errorInfo;return t?r.a.createElement(p,{error:"".concat(t," - ").concat(n.componentStack)}):this.props.children}}]),t}(r.a.Component);var J=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(q,null,r.a.createElement(H,null)),r.a.createElement(E,null))};o.a.render(r.a.createElement(J,null),document.getElementById("root"))}],[[12,1,2]]]);
//# sourceMappingURL=main.bb4353de.chunk.js.map