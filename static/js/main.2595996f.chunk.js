(this["webpackJsonplw-react"]=this["webpackJsonplw-react"]||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(28)},,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(5),o=n.n(c),s=(n(13),n(1)),i=(n(14),n(3)),l=n.n(i),u=n(6),d=n(2),m=n(7),f=function e(){Object(m.a)(this,e)};f.FETCH_INIT="FETCH_INIT",f.FETCH_SUCCESS="FETCH_SUCCESS",f.FETCH_ERROR="FETCH_ERROR",f.GEOLOCATION_ERROR="GEOLOCATION_ERROR";var E=function(e,t){var n=t.type,a=t.payload;switch(n){case f.FETCH_INIT:return Object(d.a)({},e,{isLoading:!0});case f.FETCH_SUCCESS:return Object(d.a)({},e,{isLoading:!1,weatherData:a,error:null});case f.FETCH_ERROR:case f.GEOLOCATION_ERROR:return Object(d.a)({},e,{isLoading:!1,weatherData:null,error:a});default:throw new Error("Unknown Service State: ".concat(n))}},h=function(e){var t=Object(a.useRef)("https://api.openweathermap.org/data/2.5/weather"),n=Object(a.useRef)("086370e96396a4464fe97ec16a0f7381"),r=Object(a.useReducer)(E,{isLoading:!1,weatherData:null,error:null}),c=Object(s.a)(r,2),o=c[0],i=c[1];return Object(a.useEffect)((function(){var e,a,r=new AbortController,c=r.signal,o=function(){var e=Object(u.a)(l.a.mark((function e(a){var r,o,s,u,d,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.lat,o=a.lon,s="".concat(t.current,"?lat=").concat(r,"&lon=").concat(o,"&units=metric&APPID=").concat(n.current),e.prev=2,i({type:f.FETCH_INIT}),e.next=6,fetch(s,{signal:c});case 6:if(!(u=e.sent).ok){e.next=14;break}return e.next=10,u.json();case 10:d=e.sent,i({type:f.FETCH_SUCCESS,payload:d}),e.next=18;break;case 14:return e.next=16,u.json();case 16:m=e.sent,i({type:f.FETCH_ERROR,payload:m});case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(2),i({type:f.FETCH_ERROR,payload:e.t0});case 23:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t){return e.apply(this,arguments)}}(),s=function(e){return e?parseFloat(e.toFixed(2)):0};return e=function(e){o(Object(d.a)({},function(e){var t={lat:0,lon:0};if(e){var n=e.coords,a=n.latitude,r=n.longitude;t={lat:s(a),lon:s(r)}}return t}(e)))},a=function(e){var t="An unknown Geolocation related error occurred.";switch(e.code){case e.PERMISSION_DENIED:t="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:t="Location information is unavailable.";break;case e.TIMEOUT:t="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:}i({type:f.GEOLOCATION_ERROR,payload:t})},navigator.geolocation?navigator.geolocation.getCurrentPosition(e,a):alert("Geolocation is not supported by this browser."),function(){return r.abort()}}),e),o},p=(n(16),n(17),Object(a.createContext)(null)),b=function(e){var t=e.children,n=Object(s.a)(Object(a.useContext)(p).weather,1)[0].icon,c=Object(a.useRef)({"01d":"clear-sky-d","01n":"clear-sky-n","02d":"few-clouds-d","02n":"few-clouds-n","03d":"scattered-clouds-d","03n":"scattered-clouds-n","04d":"broken-clouds-d","04n":"broken-clouds-n","09d":"shower-rain-d","09n":"shower-rain-n","10d":"rain-d","10n":"rain-n","11d":"thunderstorm-d","11n":"thunderstorm-n","13d":"snow-d","13n":"snow-n","50d":"mist"}).current[n],o=c?"weather-background weather-background--".concat(c):"weather-background";return r.a.createElement("div",{className:o},r.a.createElement("div",{className:"weather-background__glass-pane"},t))},v=(n(18),n(19),Object(a.createContext)(null)),O=function(e){var t=e.handleUnitsChange,n=Object(a.useContext)(v),c=Object(a.useRef)("units-switch__cover"),o=Object(a.useRef)("units-switch__unit-info"),s="".concat(c.current," ").concat(c.current,"--is-").concat(n.toLowerCase()),i=function(e){return n===e?"".concat(o.current," ").concat(o.current,"--is-active"):o.current};return r.a.createElement("div",{className:"units-switch",onClick:t},r.a.createElement("div",{className:s}),r.a.createElement("p",{className:i("METRIC")},"metric"),r.a.createElement("p",{className:i("IMPERIAL")},"imperial"))},w=(n(20),n(21),function(){var e=Object(a.useRef)((new Date).toLocaleDateString()),t=Object(a.useCallback)((function(){return(new Date).toLocaleTimeString()}),[]),n=Object(a.useState)((function(){return t()})),c=Object(s.a)(n,2),o=c[0],i=c[1];return Object(a.useEffect)((function(){var e=setInterval((function(){i(t())}),1e3);return function(){return clearInterval(e)}}),[]),r.a.createElement("div",{className:"calendar"},r.a.createElement("span",{className:"calendar__time"},o),r.a.createElement("span",{className:"calendar__date"}," - ",e.current))}),_=function(){var e=Object(a.useContext)(p),t=e.name,n=e.sys;return r.a.createElement("section",{className:"location"},r.a.createElement("div",{className:"location__city"},"".concat(t,", ").concat(n.country)),r.a.createElement(w,null))},R=(n(22),function(){var e=Object(a.useContext)(p).main.temp,t=Object(a.useContext)(v),n="METRIC"===t?e.toFixed(1):(1.8*e+32).toFixed(1),c="temperature--is-".concat("METRIC"===t?"celsius":"fahrenheit");return r.a.createElement("h3",{className:"temperature ".concat(c)},n)}),C=(n(23),function(){var e=Object(a.useRef)({"01d":"clear-sky-d","01n":"clear-sky-n","02d":"few-clouds-d","02n":"few-clouds-n","03d":"scattered-clouds-d","03n":"scattered-clouds-n","04d":"broken-clouds-d","04n":"broken-clouds-n","09d":"shower-rain-d","09n":"shower-rain-n","10d":"rain-d","10n":"rain-n","11d":"thunderstorm-d","11n":"thunderstorm-n","13d":"snow-d","13n":"snow-n","50d":"mist"}),t=Object(s.a)(Object(a.useContext)(p).weather,1)[0],n=t.icon,c=t.description;return r.a.createElement("section",{className:"description"},r.a.createElement("p",{className:"description__icon description__icon--".concat(e.current[n])}),r.a.createElement("p",{className:"description__text"},c))}),N=(n(24),function(){var e=Object(a.useContext)(p),t=e.main,n=e.wind,c=Object(a.useContext)(v);return function(){var e=[{category:"wind",title:"Wind speed",value:"METRIC"===c?n.speed:(2.237*n.speed).toFixed(1),units:"METRIC"===c?"m/s":"mph"},{category:"pressure",title:"Air pressure",value:t.pressure,units:"hPa"},{category:"humidity",title:"Humidity",value:t.humidity,units:"%"}].map((function(e,t){var n=e.category,a=e.title,c=e.value,o=e.units;return r.a.createElement("div",{key:t,className:"details__".concat(n)},r.a.createElement("p",{className:"details__title"},a),r.a.createElement("p",{className:"details__value"},"".concat(c," ").concat(o)))}));return r.a.createElement("section",{className:"details"},e)}()}),k=function(){var e=Object(a.useState)("METRIC"),t=Object(s.a)(e,2),n=t[0],c=t[1];return r.a.createElement("div",{className:"weather-info"},r.a.createElement(v.Provider,{value:n},r.a.createElement(O,{handleUnitsChange:function(){return c("METRIC"===n?"IMPERIAL":"METRIC")}}),r.a.createElement(_,null),r.a.createElement(R,null),r.a.createElement(C,null),r.a.createElement(N,null)))},g=function(){return r.a.createElement("div",{className:"weather-screen"},r.a.createElement(b,null,r.a.createElement(k,null)))},j=(n(25),function(e){var t=e.message,n=void 0===t?"Loading Local Weather Data...":t;return r.a.createElement("div",{className:"loading-screen"},r.a.createElement("h1",{className:"loading-screen__title"},n))}),I=(n(26),function(e){var t=e.error;return r.a.createElement("div",{className:"error-screen"},r.a.createElement("h1",{className:"error-screen__title"}," An error has occured: ",t))}),T=function(){var e=Object(a.useCallback)((function(e){if("number"===typeof e&&e>0)return 60*e*1e3;throw new Error("nbrOfMinutes must be a number greater than zero!")}),[]),t=Object(a.useRef)(e(15)),n=Object(a.useState)(!1),c=Object(s.a)(n,2),o=c[0],i=c[1],l=Object(a.useCallback)((function(){i(!o)}),[o]);Object(a.useEffect)((function(){var e=setInterval((function(){l()}),t.current);return function(){clearInterval(e)}}),[l]);var u=h([o]),d=u.isLoading,m=u.weatherData,f=u.error,E=r.a.createElement(j,{message:"Getting user coordinates..."});return d?E=r.a.createElement(j,null):f?E=r.a.createElement(I,{error:f}):m&&(E=r.a.createElement(p.Provider,{value:m},r.a.createElement(g,null))),r.a.createElement("div",{className:"weather-engine"},E)},y=(n(27),function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("section",{className:"footer__copyright"},"Local Weather Application (Bart Krolak, 2020)"),[{text:"Weather API:",linkRef:"http://openweathermap.org",linkText:"Open Weather Map"},{text:"Weather Font:",linkRef:"https://www.behance.net/artill",linkText:"Lukas Bischoff"},{text:"Weather images:",linkRef:"https://www.flickr.com/photos/archikvadrat/",linkText:"Anatol C."}].map((function(e,t){var n=e.text,a=e.linkRef,c=e.linkText;return r.a.createElement("section",{key:t,className:"footer__credits"},r.a.createElement("span",{className:"footer__text"},n),r.a.createElement("a",{className:"footer__link",href:a,target:"_blank"},c))})))});var x=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(T,null),r.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}],[[8,1,2]]]);
//# sourceMappingURL=main.2595996f.chunk.js.map